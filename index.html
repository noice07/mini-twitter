<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FriendCircle Login</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
</head>
<body>

<header>FriendCircle</header>

<main class="container">
  <form id="loginForm">
    <label for="username">Username</label>
    <input id="username" type="text" placeholder="Enter username" required />

    <label for="circlecode">Circle Code</label>
    <input id="circlecode" type="text" placeholder="Enter circle code" required />

    <button type="submit">Login</button>
  </form>
</main>

<footer>Â© 2025 FriendCircle</footer>

<script>
  const username = sessionStorage.getItem('username');
  if (!username) {
    alert("Please log in first.");
    window.location.href = "index.html";
  }

  // Profile info storage
  let profilePic = localStorage.getItem('pfp') || 'https://via.placeholder.com/40';
  let status = localStorage.getItem('status') || '';

  document.getElementById("welcomeUser").textContent = `Hi, ${username} ðŸ‘‹`;
  document.getElementById("pfp").src = profilePic;
  document.getElementById("statusText").textContent = status;

  // Post logic
  document.getElementById("postForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const msg = document.getElementById("message").value.trim();
    if (!msg) return;

    const post = document.createElement("div");
    post.className = "post";
    post.innerHTML = `
      <div class="post-header">
        <img src="${profilePic}" class="pfp-small" />
        <div>
          <strong>${username}</strong><br/>
          <span class="status">${status}</span>
        </div>
      </div>
      <p>${msg}</p>
    `;

    document.getElementById("feed").prepend(post);
    document.getElementById("message").value = '';
  });

  // Save profile
  document.getElementById("saveProfile").addEventListener("click", () => {
    const newPic = document.getElementById("profilePic").value.trim();
    const newStatus = document.getElementById("status").value.trim();
    if (newPic) localStorage.setItem('pfp', newPic);
    if (newStatus) localStorage.setItem('status', newStatus);
    alert("Profile updated. Refresh to see changes.");
  });
</script>


</body>
</html>
